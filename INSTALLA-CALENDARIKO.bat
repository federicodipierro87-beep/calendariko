@echo off
title Calendariko - Installer Principale
color 0B

cls
echo.
echo     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— 
echo    â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—
echo    â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
echo    â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
echo    â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
echo     â•šâ•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•â•â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•šâ•â•  â•šâ•â• â•šâ•â•â•â•â•â• 
echo.
echo                         Sistema di Gestione Calendario per Band v1.0
echo.
echo    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo                                    SCEGLI TIPO DI INSTALLAZIONE
echo    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo    [1] ðŸš€ INSTALLAZIONE SEMPLICE (CONSIGLIATA)
echo        âœ“ Installa Node.js automaticamente se necessario
echo        âœ“ Configura applicazione completa con npm install
echo        âœ“ Guida setup PostgreSQL (Docker o manuale)
echo        âœ“ Pronta all'uso in 3-5 minuti - PIU' STABILE
echo        âœ“ Testata e affidabile
echo.
echo    [2] ðŸ”§ INSTALLAZIONE AVANZATA (PowerShell)
echo        âœ“ Script PowerShell automatico completo
echo        âœ“ Tenta configurazione PostgreSQL automatica
echo        âœ“ Per utenti esperti e sperimentatori
echo        âœ“ Richiede privilegi amministratore
echo.
echo    [3] âš¡ INSTALLAZIONE RAPIDA (SOLO FILE)
echo        âœ“ Copia solo i file dell'applicazione
echo        âœ“ Richiede installazione manuale Node.js + PostgreSQL
echo        âœ“ Per sviluppatori o chi ha giÃ  i requisiti
echo.
echo    [4] ðŸ“– MOSTRA INFORMAZIONI E REQUISITI
echo.
echo    [5] ðŸšª ESCI
echo.
echo    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

:choice
set /p choice="    Seleziona un'opzione [1-5]: "

if "%choice%"=="1" goto simple_install
if "%choice%"=="2" goto advanced_install
if "%choice%"=="3" goto quick_install  
if "%choice%"=="4" goto show_info
if "%choice%"=="5" goto exit
echo.
echo    âŒ Opzione non valida. Riprovare.
echo.
goto choice

:show_info
cls
echo.
echo    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo                                   INFORMAZIONI CALENDARIKO
echo    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo    ðŸ“‹ DESCRIZIONE:
echo    Calendariko Ã¨ un sistema di gestione calendario professionale progettato
echo    specificatamente per band musicali e agenzie di spettacolo. Permette la
echo    gestione centralizzata di eventi, concerti e indisponibilitÃ  con controllo
echo    accessi basato sui ruoli.
echo.
echo    ðŸŽ¯ CARATTERISTICHE PRINCIPALI:
echo    â€¢ Gestione multi-band con ruoli (Admin, Manager, Member)
echo    â€¢ Calendar interattivo con vista mese/settimana/giorno
echo    â€¢ Gestione eventi: Concerti, IndisponibilitÃ , Blocchi Agenzia
echo    â€¢ Sistema di permessi granulare e sicurezza avanzata
echo    â€¢ Interface mobile-responsive e PWA
echo    â€¢ Gestione venue, cachet e dettagli finanziari
echo.
echo    ðŸ’» REQUISITI SISTEMA:
echo    â€¢ Windows 10/11 (64-bit)
echo    â€¢ 4GB RAM (consigliati 8GB)  
echo    â€¢ 2GB spazio disco libero
echo    â€¢ Connessione internet (per installazione)
echo    â€¢ Privilegi amministratore (per installazione automatica Node.js)
echo.
echo    ðŸ”§ DOPO L'INSTALLAZIONE:
echo    â€¢ URL Applicazione: http://localhost:3000
echo    â€¢ Admin: admin@calendariko.com / admin123
echo    â€¢ Manager: manager1@example.com / manager123
echo    â€¢ Member: member1@example.com / member123
echo.
echo    ðŸ“ž SUPPORTO:
echo    â€¢ GitHub: https://github.com/calendariko
echo    â€¢ Email: support@calendariko.com
echo    â€¢ Docs: https://docs.calendariko.com
echo.
echo    ðŸ’¡ CONSIGLIO: Usare l'Installazione Semplice per la migliore esperienza!
echo.
echo    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
pause
cls
goto choice

:simple_install
cls
echo.
echo    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo                               INSTALLAZIONE SEMPLICE (CONSIGLIATA)
echo    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo    Questa installazione automatizzerÃ :
echo    âœ“ Controllo e installazione Node.js LTS (se necessario)
echo    âœ“ Copia completa file applicazione
echo    âœ“ Installazione dipendenze (npm install)
echo    âœ“ Configurazione ambiente di produzione
echo    âœ“ Creazione script di avvio intelligente
echo    âœ“ Collegamenti desktop
echo.
echo    ðŸŽ¯ VANTAGGI:
echo    â€¢ Processo testato e stabile
echo    â€¢ Guida chiara per setup PostgreSQL
echo    â€¢ Supporto Docker e installazione manuale
echo    â€¢ Meno problemi di compatibilitÃ 
echo.
echo    ðŸ“ Percorso installazione: C:\Calendariko\
echo    ðŸ•’ Tempo stimato: 3-5 minuti
echo.
set /p confirm="    Continuare con l'installazione semplice? (S/N): "
if /i not "%confirm%"=="S" goto choice

echo.
echo    ðŸš€ Avvio installazione semplice...
echo.

cd /d "%~dp0\installer"
if exist "Simple-Install-ASCII.bat" (
    call Simple-Install-ASCII.bat
) else if exist "Simple-Install-Clean.bat" (
    call Simple-Install-Clean.bat
) else if exist "Simple-Install-Fixed.bat" (
    call Simple-Install-Fixed.bat
) else (
    call Simple-Install.bat
)

echo.
pause
goto choice

:advanced_install
cls
echo.
echo    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo                               INSTALLAZIONE AVANZATA (PowerShell)
echo    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo    Questa installazione userÃ  PowerShell per:
echo    âœ“ Download e installazione Node.js LTS automatica
echo    âœ“ Tentativo configurazione PostgreSQL automatica
echo    âœ“ Setup completo database e applicazione
echo    âœ“ Installazione dipendenze e inizializzazione
echo    âœ“ Script di avvio completi
echo    âœ“ Collegamenti desktop e menu Start
echo.
echo    âš ï¸  IMPORTANTE: 
echo    â€¢ Richiede privilegi di amministratore
echo    â€¢ Connessione internet attiva per i download
echo    â€¢ Processo sperimentale - puÃ² richiedere configurazione aggiuntiva
echo.
echo    ðŸ“ Percorso installazione: C:\Calendariko\
echo    ðŸ•’ Tempo stimato: 8-15 minuti
echo.
set /p confirm="    Continuare con l'installazione avanzata? (S/N): "
if /i not "%confirm%"=="S" goto choice

echo.
echo    ðŸ”§ Avvio installazione avanzata...
echo.

:: Verifica privilegi amministratore
net session >nul 2>&1
if %errorLevel% neq 0 (
    echo    âŒ ERRORE: Privilegi amministratore richiesti!
    echo.
    echo    Fare clic destro su questo file e selezionare 
    echo    "Esegui come amministratore" per continuare.
    echo.
    pause
    goto choice
)

:: Cambia alla directory installer e avvia
cd /d "%~dp0\installer"
call Install-Calendariko.bat

echo.
pause
goto choice

:quick_install
cls
echo.
echo    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo                                   INSTALLAZIONE RAPIDA
echo    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
echo.
echo    Questa installazione copierÃ  solo i file dell'applicazione senza
echo    installare automaticamente i software richiesti.
echo.
echo    âœ… COSA INCLUDE:
echo    âœ“ Copia file applicazione in C:\Calendariko\app\
echo    âœ“ Creazione file di configurazione base
echo    âœ“ Script di avvio semplificato
echo    âœ“ Collegamento desktop
echo.
echo    âš ï¸  COSA DEVI FARE MANUALMENTE DOPO:
echo    âŒ Installare Node.js LTS da: https://nodejs.org
echo    âŒ Installare PostgreSQL da: https://postgresql.org  
echo    âŒ Configurare database 'calendariko'
echo    âŒ Eseguire npm install nella cartella app
echo    âŒ Configurare file .env.local per produzione
echo.
echo    ðŸ‘¨â€ðŸ’» ADATTA PER:
echo    â€¢ Sviluppatori che hanno giÃ  Node.js e PostgreSQL
echo    â€¢ Chi vuole controllare manualmente l'installazione
echo    â€¢ Installazioni su server o ambienti personalizzati
echo.
set /p confirm="    Continuare con installazione rapida? (S/N): "
if /i not "%confirm%"=="S" goto choice

echo.
echo    âš¡ Avvio installazione rapida...
echo.

cd /d "%~dp0\installer"
call Quick-Install.bat

echo.
pause
goto choice

:exit
cls
echo.
echo    Grazie per aver scelto Calendariko!
echo.
echo    Per informazioni e supporto:
echo    ðŸŒ https://github.com/calendariko
echo    ðŸ“§ support@calendariko.com
echo.
echo    ðŸŽµ Buona gestione dei tuoi eventi musicali! ðŸŽ¼
echo.
timeout /t 3 >nul
exit /b 0